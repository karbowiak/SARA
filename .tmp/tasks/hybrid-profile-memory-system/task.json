{
  "id": "hybrid-profile-memory-system",
  "name": "Hybrid Profile + Memory System",
  "status": "active",
  "objective": "Implement guild-scoped user profiles generated by LLM from message history, with slash commands, CLI tools, and AI prompt injection",
  "context_files": [
    "AGENTS.md",
    "core/database/memories.ts",
    "core/database/messages.ts",
    "core/database/index.ts",
    "core/config.ts",
    "app/helpers/prompt-builder.ts",
    "app/plugins/slash/memory/command.ts",
    "app/plugins/slash/memory/plugin.ts",
    "app/plugins/ai/tools/memory.tool.ts",
    "migrations/001_create_messages.ts",
    "config/config.example.ts"
  ],
  "exit_criteria": [
    "Migration creates user_profiles table with all specified columns and indexes",
    "memories table supports 'profile_update' type",
    "Profile repository provides CRUD operations and formatProfileForPrompt()",
    "Messages repository has getMessagesForProfile() with reply context",
    "Profile generator service handles both new and update generation logic",
    "/profile slash command with view, generate, correct, optout, optin subcommands",
    "profile:generate CLI command for admin profile generation",
    "System prompt includes user profile when available",
    "memory.tool.ts accepts 'profile_update' type",
    "Config supports profile settings with model, days, max messages",
    "All tests pass"
  ],
  "subtask_count": 11,
  "completed_count": 0,
  "created_at": "2026-01-29T19:45:00.000Z"
}
